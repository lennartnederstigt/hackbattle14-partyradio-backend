"use strict";var APP_VERSION="v0.0.1",API_VERSION="v0.0.0";angular.module("hackbattle14PartyradioFrontendApp",["ngRoute","angular-websocket"]).config(["$routeProvider",function(a){a.when("/main",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/join",{templateUrl:"views/join.html",controller:"JoinCtrl"}).when("/suggest",{templateUrl:"views/suggest.html",controller:"SuggestCtrl"}).otherwise({redirectTo:"/suggest"})}]).config(["WebSocketProvider",function(a){a.prefix("").uri("ws://localhost:8000")}]).run(["$rootScope",function(a){a.API_VERSION=API_VERSION,a.APP_VERSION=APP_VERSION}]),angular.module("hackbattle14PartyradioFrontendApp").controller("MainCtrl",["$scope","userService","WebSocket",function(a,b){a.username=b.getUsername()}]),angular.module("hackbattle14PartyradioFrontendApp").controller("EchonestCtrl",["$scope","$http",function(a,b){a.artist="",a.$watch("artist",function(){console.log(a.artist),""!==a.artist?b.get("http://developer.echonest.com/api/v4/song/search?api_key=IPGN04JAMI9DIDKKB&artist="+a.artist).success(function(b){a.songs=b.response.songs}):a.songs=[]})}]),angular.module("hackbattle14PartyradioFrontendApp").controller("JoinCtrl",["$scope","$location","userService",function(a,b,c){a.username="",a.submitUsername=function(){""!==a.username&&(c.setUsername(a.username),b.path("/main"))}}]),angular.module("hackbattle14PartyradioFrontendApp").service("userService",function(){var a="";this.setUsername=function(b){console.log("userService: setUsername to "+b),a=b},this.getUsername=function(){return a}}),angular.module("hackbattle14PartyradioFrontendApp").controller("SuggestCtrl",["$scope","$http",function(a,b){a.$watch("suggestion",function(c,d){""!==c&&c!==d&&b.jsonp("http://api.deezer.com/search?q="+encodeURIComponent(c)+"&limit=6&&output=jsonp&callback=JSON_CALLBACK").success(function(b){console.log(b),a.autocomplete=b.data})}),a.submit=function(c){b.get("http://tnw2014-appophetweb.herokuapp.com/api/song/"+c),a.autocomplete=[],a.suggestion=""}}]);